#  Variable Name Scope in C

## Overview

In C, the *scope* of a variable refers to the region of code where the variable is valid (i.e., where it can be used).

### Key Concepts:

- A variable declared within a function (like `main()`) is valid from its point of declaration to the closing brace (`}`) of that function.
- A variable can also be declared inside a smaller block (like a loop or an if-statement), and its scope is limited to that block.

---

## Code Example: Variable Scope

```c
[[include]] <stdio.h>

int main(void) {
   // int val1 = userNum;    // ERROR
   int userNum = 2;           // Scope: From here to the end of main
   int newNum  = userNum + 1;
   int i;

   for (i = 0; i < newNum; ++i) {
     int valSquared;        // Scope: Only inside this for block
     valSquared = userNum * userNum;
     printf("%d squared: %d\n", i, valSquared);
   }

   // printf("Last value: %d\n", valSquared); // ERROR

   return 0;
}
```

### Scope Analysis

- `userNum`: Valid throughout the `main()` function from declaration onward.
- `valSquared`: Valid only within the `for` loop's block. Not accessible outside it.

---

## Participation Activity 4.10.2 Answers

1. **True** – `userNum` is already declared and can be used in `newNum`'s declaration.
2. **False** – `userNum` isn't declared yet when `val1` is (commented out).
3. **True** – `userNum` is declared in `main()` and can be used in the loop.
4. **True** – `valSquared` is declared within and used inside the loop.
5. **True** – `valSquared` is valid within the loop and can be used in `i = i + valSquared`.
6. **False** – `valSquared` cannot be used outside the loop's block.

---

## For Loop Index Scope

Declaring an index variable inside the `for` loop limits its scope to that loop.

### Example:

```c
for (int i = 0; i < 5; ++i) {
   x = x + i;
}
// x = x + i; // ERROR: i is out of scope here
```

### Equivalent While Loop:

```c
{
   int i = 0;
   while (i < 5) {
      x = x + i;
      ++i;
   }
}
// x = x + i; // ERROR
```

### Participation Activity 4.10.3 Answers

1. (a) **Yes**
2. (b) **Yes**
3. (c) **Yes**
4. (d) **Yes**
5. (e) **No**
6. **No** – Because `i` in the second loop is a new declaration within a new scope.

---

## Common Error: Reinitializing Variables in a Loop

If a variable is declared inside a loop, it is re-initialized every iteration.

### Faulty Example:

```c
[[include]] <stdio.h>

int main(void) {
   int i = 0;
   while (i < 5) {
      int tmpSum = 0;
      tmpSum = tmpSum + i;
      printf("tmpSum: %d\n", tmpSum);
      i = i + 1;
   }
   return 0;
}
```

**Output:**

```
tmpSum: 0
tmpSum: 1
tmpSum: 2
tmpSum: 3
tmpSum: 4
```

**Fix:** Declare `tmpSum` outside the loop if its value should accumulate.

---

## Participation Activity 4.10.4 Answers

Given:

```c
for (int i = 0; i < 5; ++i) {
   int j = 0;
   j = j * i;
}
```

1. At the end of iteration i = 0: **j = 0**
2. At the end of iteration i = 1: **j = 0**
3. At the end of iteration i = 2: **j = 0**
4. After the loop terminates, can j be output? **No** – `j` is out of scope.

---

## Coin Deposit Example

Demonstrates use of enums and conditionals to add values based on user input.

```c
[[include]] <stdio.h>

int main(void) {
   enum AcceptedCoins {ADD_QUARTER, ADD_DIME, ADD_NICKEL, ADD_UNKNOWN};
   int totalDeposit = 0;
   int userInput;

   printf("Add coin: 0 (add 25), 1 (add 10), 2 (add 5).  ");
   scanf("%d", &userInput);

   if (userInput == ADD_QUARTER) {
      totalDeposit = totalDeposit + 25;
   }
   else if (userInput == ADD_DIME) {
      totalDeposit = totalDeposit + 10;
   }
   else if (userInput == ADD_NICKEL) {
      totalDeposit = totalDeposit + 5;
   }
   else {
      printf("Invalid coin selection.\n");
   }

   printf("totalDeposit: %d\n", totalDeposit);

   return 0;
}
```

---

## Grocery Item Classification Example

Demonstrates use of enums and conditional statements to classify a grocery item.

```c
[[include]] <stdio.h>

int main(void) {
   enum GroceryItem {GR_APPLES, GR_BANANAS, GR_JUICE, GR_WATER};
   enum GroceryItem userItem;

   userItem = GR_APPLES; /* Your code will be tested with GR_APPLES and other values for userItem */

   if (userItem == GR_APPLES || userItem == GR_BANANAS) {
      printf("Fruit\n");
   }
   else if (userItem == GR_JUICE || userItem == GR_WATER) {
      printf("Drink\n");
   }
   else {
      printf("Unknown\n");
   }

   return 0;
}
```

---

## Summary

- Variable scope is tied to the block in which it is declared.
- For loop index variables declared in the initialization statement have loop-local scope.
- Avoid declaring variables inside loops if they should persist between iterations.
- Using variables outside of their scope causes compiler errors.
- Enums can simplify code involving multiple known constant values.
